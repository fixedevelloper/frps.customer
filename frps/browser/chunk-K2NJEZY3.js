import{s as d}from"./chunk-JUECCOZU.js";import{g as u,ga as m,ma as I}from"./chunk-UFDMT6OF.js";import{a as o,b as n}from"./chunk-EQDQRRRY.js";var b=(()=>{let c=class c{constructor(){this.cartItemsSubject=new u([]),this.cartItems$=this.cartItemsSubject.asObservable(),this.toastrService=I(d);let t=localStorage.getItem("cart");t&&this.cartItemsSubject.next(JSON.parse(t))}getItems(){return this.cartItemsSubject.value}addItem(t){let r={productId:t.id,name:t.intitule,price:+t.price,quantity:1,image:t.image},e=[...this.cartItemsSubject.value],a=e.findIndex(i=>i.productId===r.productId);a>-1?e[a]=n(o({},e[a]),{quantity:e[a].quantity+r.quantity}):e.push(r),this.toastrService.success("article ajoute au panier"),this.cartItemsSubject.next(e),this.saveToStorage(e)}removeItem(t){let e=this.cartItemsSubject.value.filter(a=>a.productId!==t);this.cartItemsSubject.next(e),this.toastrService.error("article retire au panier"),this.saveToStorage(e)}clearCart(){this.cartItemsSubject.next([]),localStorage.removeItem("cart")}updateQuantity(t,r){let e=this.cartItemsSubject.value,a=e.findIndex(i=>i.productId===t);a>-1&&(e[a].quantity=r,this.cartItemsSubject.next(e),this.saveToStorage(e))}getTotal(){return this.cartItemsSubject.value.reduce((t,r)=>t+r.price*r.quantity,0)}saveToStorage(t){localStorage.setItem("cart",JSON.stringify(t))}};c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=m({token:c,factory:c.\u0275fac,providedIn:"root"});let s=c;return s})();export{b as a};
